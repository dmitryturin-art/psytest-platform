# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –Ω–æ–≤–æ–≥–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∞

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 26 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–î–ª—è:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
3. [–î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ](#–¥–µ—Ç–∞–ª—å–Ω–æ–µ-—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ)
4. [–ü—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∏–º–µ—Ä—ã)
5. [–ß–µ–∫-–ª–∏—Å—Ç](#—á–µ–∫-–ª–∏—Å—Ç)
6. [FAQ](#faq)

---

## üéØ –í–≤–µ–¥–µ–Ω–∏–µ

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –¥–ª—è PsyTest Platform. –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω–∏–º–∞–µ—Ç 30-60 –º–∏–Ω—É—Ç –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞ –∏ 2-4 —á–∞—Å–∞ –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ.

### –ß—Ç–æ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

- ‚úÖ –ó–Ω–∞–Ω–∏–µ PHP 8.1+
- ‚úÖ –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Å–∏—Ö–æ–º–µ—Ç—Ä–∏–∏ (–±–∞–∑–æ–≤–æ–µ)
- ‚úÖ –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ —Ç–µ—Å—Ç–∞
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —à–∫–∞–ª

### –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

| –¢–∏–ø | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ—Ä | –í—Ä–µ–º—è |
|-----|-----------|--------|-------|
| –ü—Ä–æ—Å—Ç–æ–π | ‚≠ê | Beck Anxiety | 30 –º–∏–Ω |
| –°—Ä–µ–¥–Ω–∏–π | ‚≠ê‚≠ê | Big Five | 1-2 —á–∞—Å–∞ |
| –°–ª–æ–∂–Ω—ã–π | ‚≠ê‚≠ê‚≠ê | –°–ú–ò–õ (MMPI) | 4+ —á–∞—Å–∞ |

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –º–æ–¥—É–ª—è
mkdir -p modules/my-test

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã
cd modules/my-test
touch MyTestModule.php metadata.json questions.json README.md
```

### –®–∞–≥ 2: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

**–§–∞–π–ª:** `metadata.json`

```json
{
  "slug": "my-test",
  "name": "–ú–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç",
  "description": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞",
  "question_count": 20,
  "estimated_time": 10,
  "scales": [
    {
      "code": "A",
      "name": "–®–∫–∞–ª–∞ A",
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ —à–∫–∞–ª—ã A"
    }
  ],
  "requires_demographics": {
    "gender": false,
    "age": false
  },
  "version": "1.0",
  "author": "–ê–≤—Ç–æ—Ä —Ç–µ—Å—Ç–∞"
}
```

### –®–∞–≥ 3: –î–æ–±–∞–≤—å—Ç–µ –≤–æ–ø—Ä–æ—Å—ã

**–§–∞–π–ª:** `questions.json`

```json
[
  {
    "id": 1,
    "text": "–¢–µ–∫—Å—Ç –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞",
    "type": "yes_no",
    "scale": "A",
    "direction": 1
  },
  {
    "id": 2,
    "text": "–¢–µ–∫—Å—Ç –≤—Ç–æ—Ä–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞",
    "type": "yes_no",
    "scale": "A",
    "direction": -1
  }
]
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –º–æ–¥—É–ª—è

**–§–∞–π–ª:** `MyTestModule.php`

```php
<?php
declare(strict_types=1);

namespace PsyTest\Modules\MyTest;

use PsyTest\Modules\BaseTestModule;

class MyTestModule extends BaseTestModule
{
    public function calculateResults(array $answers): array
    {
        $score = 0;
        $questions = $this->getQuestions();
        
        foreach ($answers as $questionId => $answer) {
            $question = $this->findQuestion($questions, $questionId);
            if ($question) {
                $direction = $question['direction'] ?? 1;
                $score += ($direction === 1) ? ($answer ? 1 : 0) : ($answer ? 0 : 1);
            }
        }
        
        return [
            'scores' => ['A' => $score],
            'total' => $score,
        ];
    }
    
    public function generateInterpretation(array $scores): array
    {
        $score = $scores['scores']['A'] ?? 0;
        
        if ($score < 5) {
            $level = 'low';
            $text = '–ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å';
        } elseif ($score < 15) {
            $level = 'normal';
            $text = '–ù–æ—Ä–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å';
        } else {
            $level = 'high';
            $text = '–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å';
        }
        
        return [
            'summary' => $text,
            'scales' => [
                'A' => [
                    'score' => $score,
                    'level' => $level,
                    'interpretation' => $text,
                ]
            ],
            'recommendations' => [],
        ];
    }
    
    public function renderResults(array $results): string
    {
        $html = '<div class="test-results">';
        $html .= '<h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞</h2>';
        $html .= '<p>–í–∞—à –±–∞–ª–ª: ' . ($results['total'] ?? 0) . '</p>';
        $html .= '</div>';
        return $html;
    }
    
    private function findQuestion(array $questions, int $id): ?array
    {
        foreach ($questions as $question) {
            if ($question['id'] == $id) {
                return $question;
            }
        }
        return null;
    }
}
```

### –®–∞–≥ 5: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ –ë–î

```sql
INSERT INTO tests (name, slug, module_class, description, is_active, sort_order)
VALUES (
    '–ú–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç',
    'my-test',
    'PsyTest\\Modules\\MyTest\\MyTestModule',
    '–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞',
    1,
    10
);
```

### –®–∞–≥ 6: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å–µ—Å—Å–∏—é
php bin/test-module.php my-test

# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open http://localhost:8000/test/my-test
```

---

## üìö –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
modules/my-test/
‚îú‚îÄ‚îÄ MyTestModule.php           # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ metadata.json              # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∞
‚îú‚îÄ‚îÄ questions.json             # –í–æ–ø—Ä–æ—Å—ã —Ç–µ—Å—Ç–∞
‚îú‚îÄ‚îÄ interpretations.json       # –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ norms.json                 # –ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ README.md                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è
‚îî‚îÄ‚îÄ views/                     # –ö–∞—Å—Ç–æ–º–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    ‚îú‚îÄ‚îÄ test.twig
    ‚îî‚îÄ‚îÄ results.twig
```

---

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (metadata.json)

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

```json
{
  "slug": "my-test",              // URL-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (a-z, 0-9, -)
  "name": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞",       // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ",      // –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
  "question_count": 20,           // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤
  "estimated_time": 10            // –í—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è (–º–∏–Ω—É—Ç—ã)
}
```

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

```json
{
  "scales": [                     // –®–∫–∞–ª—ã —Ç–µ—Å—Ç–∞
    {
      "code": "A",                // –ö–æ–¥ —à–∫–∞–ª—ã
      "name": "–ù–∞–∑–≤–∞–Ω–∏–µ",         // –ù–∞–∑–≤–∞–Ω–∏–µ —à–∫–∞–ª—ã
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ"   // –û–ø–∏—Å–∞–Ω–∏–µ —à–∫–∞–ª—ã
    }
  ],
  "requires_demographics": {      // –¢—Ä–µ–±—É–µ–º—ã–µ –¥–µ–º–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
    "gender": true,               // –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª
    "age": true,                  // –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–æ–∑—Ä–∞—Å—Ç
    "min_age": 16,                // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç
    "max_age": 65                 // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç
  },
  "version": "1.0",               // –í–µ—Ä—Å–∏—è —Ç–µ—Å—Ç–∞
  "author": "–ê–≤—Ç–æ—Ä",              // –ê–≤—Ç–æ—Ä –º–µ—Ç–æ–¥–∏–∫–∏
  "source": "–ò—Å—Ç–æ—á–Ω–∏–∫",           // –ò—Å—Ç–æ—á–Ω–∏–∫/—Å—Å—ã–ª–∫–∞
  "language": "ru",               // –Ø–∑—ã–∫ —Ç–µ—Å—Ç–∞
  "supports_pair_mode": false     // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
}
```

---

### –í–æ–ø—Ä–æ—Å—ã (questions.json)

#### –§–æ—Ä–º–∞—Ç –≤–æ–ø—Ä–æ—Å–∞

```json
{
  "id": 1,                        // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  "text": "–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞",        // –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  "type": "yes_no",               // –¢–∏–ø –≤–æ–ø—Ä–æ—Å–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  "scale": "A",                   // –®–∫–∞–ª–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  "direction": 1,                 // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å—á–µ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  "weight": 1.0,                  // –í–µ—Å –≤–æ–ø—Ä–æ—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  "reverse": false                // –û–±—Ä–∞—Ç–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}
```

#### –¢–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤

**1. –î–∞/–ù–µ—Ç (yes_no)**

```json
{
  "id": 1,
  "text": "–í—ã —á–∞—Å—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Ç—Ä–µ–≤–æ–≥—É?",
  "type": "yes_no",
  "scale": "anxiety"
}
```

**2. –®–∫–∞–ª–∞ –õ–∞–π–∫–µ—Ä—Ç–∞ (likert)**

```json
{
  "id": 2,
  "text": "–ù–∞—Å–∫–æ–ª—å–∫–æ –≤—ã —Å–æ–≥–ª–∞—Å–Ω—ã —Å —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º?",
  "type": "likert",
  "scale": "A",
  "options": [
    {"value": 0, "label": "–°–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–µ —Å–æ–≥–ª–∞—Å–µ–Ω"},
    {"value": 1, "label": "–ù–µ —Å–æ–≥–ª–∞—Å–µ–Ω"},
    {"value": 2, "label": "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ"},
    {"value": 3, "label": "–°–æ–≥–ª–∞—Å–µ–Ω"},
    {"value": 4, "label": "–ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–µ–Ω"}
  ]
}
```

**3. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä (multiple_choice)**

```json
{
  "id": 3,
  "text": "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç",
  "type": "multiple_choice",
  "scale": "B",
  "options": [
    {"value": "a", "label": "–í–∞—Ä–∏–∞–Ω—Ç A", "score": 1},
    {"value": "b", "label": "–í–∞—Ä–∏–∞–Ω—Ç B", "score": 2},
    {"value": "c", "label": "–í–∞—Ä–∏–∞–Ω—Ç C", "score": 3}
  ]
}
```

**4. –ß–∏—Å–ª–æ–≤–æ–π –≤–≤–æ–¥ (numeric)**

```json
{
  "id": 4,
  "text": "–°–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –≤—ã —Å–ø–∏—Ç–µ –≤ –¥–µ–Ω—å?",
  "type": "numeric",
  "scale": "sleep",
  "min": 0,
  "max": 24,
  "step": 0.5
}
```

---

### –ö–ª–∞—Å—Å –º–æ–¥—É–ª—è (MyTestModule.php)

#### –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```php
<?php
declare(strict_types=1);

namespace PsyTest\Modules\MyTest;

use PsyTest\Modules\BaseTestModule;

class MyTestModule extends BaseTestModule
{
    /**
     * –†–∞—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
     * 
     * @param array $answers –û—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * @return array –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞
     */
    public function calculateResults(array $answers): array
    {
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞
        return [
            'scores' => [],
            'raw_scores' => [],
            'percentiles' => [],
        ];
    }
    
    /**
     * –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
     * 
     * @param array $scores –†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –±–∞–ª–ª—ã
     * @return array –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
     */
    public function generateInterpretation(array $scores): array
    {
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
        return [
            'summary' => '',
            'scales' => [],
            'recommendations' => [],
        ];
    }
    
    /**
     * –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
     * 
     * @param array $results –ü–æ–ª–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
     * @return string HTML
     */
    public function renderResults(array $results): string
    {
        // –í–∞—à HTML
        return '<div>...</div>';
    }
}
```

#### –ú–µ—Ç–æ–¥—ã BaseTestModule

–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞:

```php
// –ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
protected function loadQuestionsFromJson(string $filename): array

// –†–∞—Å—á–µ—Ç T-score
protected function calculateTScore(float $rawScore, float $mean, float $stdDev): float

// –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–ª–ª–∞
protected function normalizeScore(float $score, float $min, float $max): float

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
protected function getInterpretationLevel(float $score, array $thresholds): string

// –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
protected function validateAnswers(array $answers, array $questions): bool
```

---

### –†–∞—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### –ü—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Å—á–µ—Ç –±–∞–ª–ª–æ–≤

```php
public function calculateResults(array $answers): array
{
    $score = 0;
    $questions = $this->getQuestions();
    
    foreach ($answers as $questionId => $answer) {
        $question = $this->findQuestion($questions, $questionId);
        
        if ($question && $question['scale'] === 'A') {
            $direction = $question['direction'] ?? 1;
            
            if ($direction === 1) {
                $score += $answer ? 1 : 0;
            } else {
                $score += $answer ? 0 : 1;
            }
        }
    }
    
    return [
        'scores' => ['A' => $score],
        'total' => $score,
    ];
}
```

#### –†–∞—Å—á–µ—Ç —Å –≤–µ—Å–∞–º–∏

```php
public function calculateResults(array $answers): array
{
    $score = 0.0;
    $questions = $this->getQuestions();
    
    foreach ($answers as $questionId => $answer) {
        $question = $this->findQuestion($questions, $questionId);
        
        if ($question) {
            $weight = $question['weight'] ?? 1.0;
            $score += $answer * $weight;
        }
    }
    
    return [
        'scores' => ['weighted' => $score],
        'total' => $score,
    ];
}
```

#### –†–∞—Å—á–µ—Ç —Å –Ω–æ—Ä–º–∞–º–∏ (T-scores)

```php
public function calculateResults(array $answers): array
{
    $rawScore = $this->calculateRawScore($answers);
    $gender = $answers['gender'] ?? 'male';
    
    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ—Ä–º—ã
    $norms = $this->loadNorms();
    $mean = $norms[$gender]['mean'] ?? 50;
    $stdDev = $norms[$gender]['stdDev'] ?? 10;
    
    // –†–∞—Å—Å—á–∏—Ç–∞—Ç—å T-score
    $tScore = $this->calculateTScore($rawScore, $mean, $stdDev);
    
    return [
        'raw_score' => $rawScore,
        't_score' => $tScore,
        'gender' => $gender,
    ];
}

private function loadNorms(): array
{
    $filepath = $this->modulePath . '/norms.json';
    $content = file_get_contents($filepath);
    return json_decode($content, true);
}
```

---

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è

```php
public function generateInterpretation(array $scores): array
{
    $score = $scores['total'] ?? 0;
    
    if ($score < 10) {
        $level = 'low';
        $text = '–ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏';
    } elseif ($score < 20) {
        $level = 'normal';
        $text = '–ù–æ—Ä–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏';
    } else {
        $level = 'high';
        $text = '–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏';
    }
    
    return [
        'summary' => $text,
        'level' => $level,
        'score' => $score,
    ];
}
```

#### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –ø–æ —à–∫–∞–ª–∞–º

```php
public function generateInterpretation(array $scores): array
{
    $interpretations = [];
    
    foreach ($scores['scales'] as $scale => $score) {
        $interpretations[$scale] = [
            'score' => $score,
            'level' => $this->getLevel($score),
            'text' => $this->getInterpretationText($scale, $score),
        ];
    }
    
    return [
        'summary' => $this->generateSummary($interpretations),
        'scales' => $interpretations,
        'recommendations' => $this->generateRecommendations($interpretations),
    ];
}

private function getLevel(float $score): string
{
    if ($score < 45) return 'low';
    if ($score < 55) return 'normal';
    if ($score < 65) return 'elevated';
    if ($score < 75) return 'high';
    return 'very_high';
}
```

#### –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–π –∏–∑ JSON

```php
public function generateInterpretation(array $scores): array
{
    $interpretations = $this->loadInterpretations();
    $result = [];
    
    foreach ($scores['scales'] as $scale => $score) {
        $level = $this->getLevel($score);
        $scaleData = $interpretations[$scale] ?? [];
        
        $result[$scale] = [
            'score' => $score,
            'level' => $level,
            'name' => $scaleData['name'] ?? $scale,
            'text' => $scaleData['levels'][$level] ?? '',
        ];
    }
    
    return [
        'summary' => $this->generateSummary($result),
        'scales' => $result,
    ];
}

private function loadInterpretations(): array
{
    $filepath = $this->modulePath . '/interpretations.json';
    $content = file_get_contents($filepath);
    return json_decode($content, true);
}
```

**–§–∞–π–ª:** `interpretations.json`

```json
{
  "A": {
    "name": "–®–∫–∞–ª–∞ A",
    "levels": {
      "low": "–ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å: ...",
      "normal": "–ù–æ—Ä–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å: ...",
      "elevated": "–ü–æ–≤—ã—à–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å: ...",
      "high": "–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å: ...",
      "very_high": "–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å: ..."
    }
  }
}
```

---

### –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### –ü—Ä–æ—Å—Ç–æ–π HTML

```php
public function renderResults(array $results): string
{
    $html = '<div class="test-results">';
    $html .= '<h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞</h2>';
    
    $html .= '<div class="score-summary">';
    $html .= '<p class="total-score">–û–±—â–∏–π –±–∞–ª–ª: ' . ($results['total'] ?? 0) . '</p>';
    $html .= '</div>';
    
    $html .= '<div class="interpretation">';
    $html .= '<h3>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è</h3>';
    $html .= '<p>' . htmlspecialchars($results['interpretation']['summary'] ?? '') . '</p>';
    $html .= '</div>';
    
    $html .= '</div>';
    return $html;
}
```

#### –° —Ç–∞–±–ª–∏—Ü–µ–π —à–∫–∞–ª

```php
public function renderResults(array $results): string
{
    $html = '<div class="test-results">';
    
    // –¢–∞–±–ª–∏—Ü–∞ —à–∫–∞–ª
    $html .= '<table class="scales-table">';
    $html .= '<thead><tr><th>–®–∫–∞–ª–∞</th><th>–ë–∞–ª–ª</th><th>–£—Ä–æ–≤–µ–Ω—å</th></tr></thead>';
    $html .= '<tbody>';
    
    foreach ($results['interpretation']['scales'] ?? [] as $scale => $data) {
        $levelClass = $data['level'] ?? 'normal';
        $html .= '<tr class="level-' . $levelClass . '">';
        $html .= '<td>' . htmlspecialchars($data['name'] ?? $scale) . '</td>';
        $html .= '<td>' . ($data['score'] ?? 0) . '</td>';
        $html .= '<td>' . $this->getLevelName($levelClass) . '</td>';
        $html .= '</tr>';
    }
    
    $html .= '</tbody></table>';
    $html .= '</div>';
    
    return $html;
}

private function getLevelName(string $level): string
{
    $names = [
        'low' => '–ù–∏–∑–∫–∏–π',
        'normal' => '–ù–æ—Ä–º–∞',
        'elevated' => '–ü–æ–≤—ã—à–µ–Ω–Ω—ã–π',
        'high' => '–í—ã—Å–æ–∫–∏–π',
        'very_high' => '–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π',
    ];
    return $names[$level] ?? $level;
}
```

#### –° –≥—Ä–∞—Ñ–∏–∫–æ–º (Chart.js)

```php
public function renderResults(array $results): string
{
    $scales = array_keys($results['scores'] ?? []);
    $scores = array_values($results['scores'] ?? []);
    
    $scalesJson = json_encode($scales);
    $scoresJson = json_encode($scores);
    
    $html = '<div class="test-results">';
    $html .= '<div class="chart-container">';
    $html .= '<canvas id="resultsChart" data-labels=\'' . $scalesJson . '\' data-scores=\'' . $scoresJson . '\'></canvas>';
    $html .= '</div>';
    $html .= '</div>';
    
    return $html;
}
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç (Beck Anxiety)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- 21 –≤–æ–ø—Ä–æ—Å
- –®–∫–∞–ª–∞ –õ–∞–π–∫–µ—Ä—Ç–∞ (0-3)
- –û–¥–Ω–∞ —à–∫–∞–ª–∞
- –ü—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Å—á–µ—Ç

**–§–∞–π–ª:** `modules/beck-anxiety/BeckAnxietyModule.php`

```php
<?php
declare(strict_types=1);

namespace PsyTest\Modules\BeckAnxiety;

use PsyTest\Modules\BaseTestModule;

class BeckAnxietyModule extends BaseTestModule
{
    public function calculateResults(array $answers): array
    {
        $totalScore = 0;
        
        foreach ($answers as $questionId => $answer) {
            if (is_numeric($answer)) {
                $totalScore += (int) $answer;
            }
        }
        
        return [
            'total_score' => $totalScore,
            'level' => $this->getAnxietyLevel($totalScore),
        ];
    }
    
    public function generateInterpretation(array $scores): array
    {
        $score = $scores['total_score'] ?? 0;
        $level = $scores['level'] ?? 'minimal';
        
        $interpretations = [
            'minimal' => '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–≥–∏',
            'mild' => '–õ–µ–≥–∫–∞—è —Ç—Ä–µ–≤–æ–≥–∞',
            'moderate' => '–£–º–µ—Ä–µ–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞',
            'severe' => '–í—ã—Ä–∞–∂–µ–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞',
        ];
        
        return [
            'summary' => $interpretations[$level],
            'score' => $score,
            'level' => $level,
        ];
    }
    
    public function renderResults(array $results): string
    {
        $score = $results['total_score'] ?? 0;
        $level = $results['level'] ?? 'minimal';
        
        $html = '<div class="beck-results">';
        $html .= '<h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ Beck Anxiety Inventory</h2>';
        $html .= '<div class="score-box level-' . $level . '">';
        $html .= '<p class="score">' . $score . ' –±–∞–ª–ª–æ–≤</p>';
        $html .= '<p class="level">' . $results['interpretation']['summary'] . '</p>';
        $html .= '</div>';
        $html .= '</div>';
        
        return $html;
    }
    
    private function getAnxietyLevel(int $score): string
    {
        if ($score <= 7) return 'minimal';
        if ($score <= 15) return 'mild';
        if ($score <= 25) return 'moderate';
        return 'severe';
    }
}
```

---

### –ü—Ä–∏–º–µ—Ä 2: –¢–µ—Å—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —à–∫–∞–ª–∞–º–∏

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- 50 –≤–æ–ø—Ä–æ—Å–æ–≤
- –î–∞/–ù–µ—Ç
- 5 —à–∫–∞–ª
- T-scores

**–§–∞–π–ª:** `modules/big-five/BigFiveModule.php`

```php
<?php
declare(strict_types=1);

namespace PsyTest\Modules\BigFive;

use PsyTest\Modules\BaseTestModule;

class BigFiveModule extends BaseTestModule
{
    private const SCALES = ['O', 'C', 'E', 'A', 'N'];
    
    public function calculateResults(array $answers): array
    {
        $rawScores = $this->calculateRawScores($answers);
        $tScores = $this->convertToTScores($rawScores);
        
        return [
            'raw_scores' => $rawScores,
            't_scores' => $tScores,
        ];
    }
    
    private function calculateRawScores(array $answers): array
    {
        $scores = array_fill_keys(self::SCALES, 0);
        $questions = $this->getQuestions();
        
        foreach ($answers as $questionId => $answer) {
            $question = $this->findQuestion($questions, $questionId);
            
            if ($question) {
                $scale = $question['scale'];
                $direction = $question['direction'] ?? 1;
                
                if (isset($scores[$scale])) {
                    $scores[$scale] += ($direction === 1) ? ($answer ? 1 : 0) : ($answer ? 0 : 1);
                }
            }
        }
        
        return $scores;
    }
    
    private function convertToTScores(array $rawScores): array
    {
        $norms = $this->loadNorms();
        $tScores = [];
        
        foreach ($rawScores as $scale => $rawScore) {
            $mean = $norms[$scale]['mean'] ?? 5;
            $stdDev = $norms[$scale]['stdDev'] ?? 2;
            $tScores[$scale] = $this->calculateTScore($rawScore, $mean, $stdDev);
        }
        
        return $tScores;
    }
    
    private function loadNorms(): array
    {
        return [
            'O' => ['mean' => 5.0, 'stdDev' => 2.0],
            'C' => ['mean' => 5.0, 'stdDev' => 2.0],
            'E' => ['mean' => 5.0, 'stdDev' => 2.0],
            'A' => ['mean' => 5.0, 'stdDev' => 2.0],
            'N' => ['mean' => 5.0, 'stdDev' => 2.0],
        ];
    }
    
    private function findQuestion(array $questions, int $id): ?array
    {
        foreach ($questions as $question) {
            if ($question['id'] == $id) {
                return $question;
            }
        }
        return null;
    }
}
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

- [ ] –ò–∑—É—á–µ–Ω–∞ –º–µ—Ç–æ–¥–∏–∫–∞ —Ç–µ—Å—Ç–∞
- [ ] –ï—Å—Ç—å —Ç–µ–∫—Å—Ç –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- [ ] –ò–∑–≤–µ—Å—Ç–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞
- [ ] –ï—Å—Ç—å –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç—Ä–µ–±—É–µ–º—ã–µ –¥–µ–º–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è

- [ ] –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `modules/my-test/`
- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `metadata.json`
- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `questions.json`
- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `MyTestModule.php`
- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `README.md`

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

- [ ] –ú–µ—Ç–æ–¥ `calculateResults()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] –ú–µ—Ç–æ–¥ `generateInterpretation()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] –ú–µ—Ç–æ–¥ `renderResults()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –ú–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í–æ–ø—Ä–æ—Å—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –†–∞—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- [ ] HTML —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

- [ ] –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ë–î
- [ ] –¢–µ—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω (`is_active = 1`)
- [ ] –¢–µ—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
- [ ] –°—Å—ã–ª–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ ] README.md –∑–∞–ø–æ–ª–Ω–µ–Ω
- [ ] –û–ø–∏—Å–∞–Ω–∞ –º–µ—Ç–æ–¥–∏–∫–∞
- [ ] –£–∫–∞–∑–∞–Ω—ã –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- [ ] –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω—ã

---

## ‚ùì FAQ

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –¥–µ–º–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ?

–í `metadata.json`:

```json
{
  "requires_demographics": {
    "gender": true,
    "age": true,
    "min_age": 16,
    "max_age": 65
  }
}
```

–í –∫–æ–¥–µ:

```php
public function calculateResults(array $answers): array
{
    $gender = $answers['gender'] ?? 'male';
    $age = $answers['age'] ?? 25;
    
    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö
}
```

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π —à–∞–±–ª–æ–Ω?

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `views/results.twig`
2. –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–µ—Ç–æ–¥:

```php
public function getResultTemplate(): ?string
{
    return 'my-test-results';
}
```

3. –°–æ–∑–¥–∞–π—Ç–µ —à–∞–±–ª–æ–Ω –≤ `templates/my-test-results.twig`

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π JavaScript?

```php
public function getCustomJavaScript(): ?string
{
    return '/js/my-test.js';
}
```

### –ö–∞–∫ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø–∞—Ä–Ω—ã–π —Ä–µ–∂–∏–º?

```php
public function supportsPairMode(): bool
{
    return true;
}

public function comparePairResults(array $results1, array $results2): array
{
    return [
        'results_1' => $results1,
        'results_2' => $results2,
        'differences' => $this->calculateDifferences($results1, $results2),
    ];
}
```

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å PDF-–æ—Ç—á–µ—Ç?

PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ HTML —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. –î–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏:

1. –î–æ–±–∞–≤—å—Ç–µ CSS –¥–ª—è –ø–µ—á–∞—Ç–∏
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞—Å—Å—ã `.pdf-only` –∏ `.screen-only`

### –ö–∞–∫ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã?

```php
public function calculateResults(array $answers): array
{
    $questions = $this->getQuestions();
    
    if (!$this->validateAnswers($answers, $questions)) {
        throw new \InvalidArgumentException('Invalid answers');
    }
    
    // –†–∞—Å—á–µ—Ç...
}
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](architecture.md)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](api/)
- [–ü—Ä–∏–º–µ—Ä—ã –º–æ–¥—É–ª–µ–π](../modules/)
- [–ü—Å–∏—Ö–æ–º–µ—Ç—Ä–∏—è: –æ—Å–Ω–æ–≤—ã](https://example.com)

---

**–ö–æ–Ω–µ—Ü —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞**
